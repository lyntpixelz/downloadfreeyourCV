<!DOCTYPE html>
<html lang='vi'>
<head>
  <meta charset='UTF-8'>
  <title>Nh·∫≠p th√¥ng tin c√° nh√¢n</title>
  <link rel='stylesheet' href='style.css'>
</head>
<body>
  <header class='navbar'>
    <a href='dashboard.html' class='logo'>T·∫°o CV</a>
  </header>
  <main class='container'>
    <h2>Nh·∫≠p th√¥ng tin c√° nh√¢n</h2>
    <form id='info-form'>
      <input type='text' name='fullname' placeholder='H·ªç t√™n' required>
      <input type='email' name='email' placeholder='Email' required>
      <input type='tel' name='phone' placeholder='S·ªë ƒëi·ªán tho·∫°i'>
      <button type='submit' class='btn primary'>Ti·∫øp t·ª•c</button>
    </form>
  </main>

  <script>
    document.getElementById('info-form').addEventListener('submit', async function (e) {
      e.preventDefault();

      const formData = {
        fullname: this.fullname.value,
        email: this.email.value,
        phone: this.phone.value
      };

      try {
        const res = await fetch('https://downloadfreeyourcv.onrender.com/info', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(formData)
        });

        const result = await res.json();

        if (res.ok) {
          alert(result.message || 'L∆∞u th√¥ng tin th√†nh c√¥ng!');
          window.location.href = 'choose-template.html'; // üîÑ ho·∫∑c chuy·ªÉn b∆∞·ªõc ti·∫øp theo
        } else {
          alert(result.message || 'Kh√¥ng th·ªÉ l∆∞u th√¥ng tin!');
        }
      } catch (error) {
        alert('L·ªói h·ªá th·ªëng khi l∆∞u th√¥ng tin.');
        console.error(error);
      }
    });
  </script>
</body>
</html>
